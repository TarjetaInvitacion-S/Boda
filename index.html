<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.9" />
    <title>Nos Casamos !</title>
    <link id="estilo" rel="stylesheet" href="style1.css">

</head>

<body>
    <script>
        // Actualiza el href con un parámetro de versión único (timestamp)
        document.getElementById("estilo").href = "style1.css?v=" + new Date().getTime();
    </script>

    <audio id="musica" src="musica.mp3" autoplay></audio>

    <!-- Carta con iframe -->
    <div class="carta" id="carta">
        <!-- <iframe src="index.html"></iframe> -->
        <!-- <div class="bloqueo" id="bloqueo"></div> -->
        <div class="particles-background"></div>
    </div>

    <!-- Decoraciones -->
    <div class="decoraciones" id="decoraciones">
        <div class="mensaje-invitacion" id="mensaje"
            style="display: flex; justify-content: center; align-items: center;">
            ¡Haz clic para abrir la invitación!
        </div>
        <img src="fotos/broche.png" id="broche" width="100" alt=""
            style="top: 40%; left: calc(50% - 50px); z-index: 5;" />
        <style>
            .mensaje-invitacion {
                margin: auto;
                position: relative;
                text-align: center;
                top: 70%;
                transform: translateX(-50%);
                padding: 10px 20px;
                width: auto;
                max-width: 50%;
                font-family: 'Georgia', serif;
                font-size: 1.4em;
                color: #7a4e2d;
                background-color: rgba(255, 255, 255, 0.8);
                border-radius: 12px;
                animation: pulse 2s infinite ease-in-out;
            }


            @keyframes pulse {
                0% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.1);
                }

                100% {
                    transform: scale(1);
                }
            }

            #broche {
                position: absolute;
                width: 100px;
                top: 41%;
                left: calc(50% - 50px);
                z-index: 5;
                animation: pulse 1.2s infinite ease-in-out;
                cursor: pointer;
            }
        </style>


        <!-- <img src="lazo.png" width="500" alt="" style="top: 40%; left: -140px; z-index: 4;" /> -->
        <img src="fotos/lazo1.png" width="2100" alt="" class="centered-image" />
        <img src="fotos/lazo1.png" width="2100" alt="" class="centered-image1" />
    </div>
    </div>

    <!-- Panel izquierdo -->
    <div class="panel panel-izquierdo" id="panelIzquierdo"></div>

    <!-- Panel derecho -->
    <div class="panel panel-derecho" id="panelDerecho"></div>

    <!-- Script -->
    <script>
        function abrirInvitacion() {
            const audio = document.getElementById('musica');
            audio.volume = 1;
            audio.play().catch(err => console.log(err));

            const body = document.documentElement;
            if (body.requestFullscreen) {
                body.requestFullscreen().catch(err => {
                    console.warn('No se pudo poner en fullscreen:', err);
                });
            }

            const decoraciones = document.getElementById('decoraciones');

            document.getElementById('panelIzquierdo')?.classList.add('open');
            document.getElementById('panelDerecho')?.classList.add('open');

            decoraciones?.removeAttribute('class');
            decoraciones.innerHTML = '';
        }

        document.addEventListener('DOMContentLoaded', () => {
            const broche = document.getElementById('broche');
            const mensaje = document.getElementById('mensaje');

            if (broche) broche.addEventListener('click', abrirInvitacion);
            if (mensaje) mensaje.addEventListener('click', abrirInvitacion);
        });
    </script>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('broche').addEventListener('click', () => {
                const carta = document.getElementById('carta');
                if (!carta) {
                    console.warn('Elemento con id="carta" no encontrado');
                    return;
                }

                const bloqueo = document.getElementById('bloqueo');
                if (bloqueo) bloqueo.remove();

                const iframe = document.createElement('iframe');
                iframe.src = 'invitacion.html';
                iframe.style.width = '100%';
                iframe.style.height = '100%';
                iframe.style.border = 'none';

                carta.insertBefore(iframe, carta.firstChild); // <- Aquí el error si "carta" no existe

                document.getElementById('panelIzquierdo')?.classList.add('open');
                document.getElementById('panelDerecho')?.classList.add('open');

                const decoraciones = document.getElementById('decoraciones');
                if (decoraciones) {
                    decoraciones.removeAttribute('class');
                    decoraciones.innerHTML = '';
                }
            });
        });
    </script>
    <script>
        const container = document.querySelector('.particles-background');

        for (let i = 0; i < 100; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            const size = Math.random() * 2 + 1; // tamaño entre 1 y 3px
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;

            particle.style.top = `${Math.random() * 100}%`;
            particle.style.left = `${Math.random() * 100}%`;
            particle.style.animationDuration = `${5 + Math.random() * 10}s`; // entre 5 y 15s
            particle.style.animationDelay = `${Math.random() * 5}s`;

            container.appendChild(particle);
        }
    </script>
    <script>
        document.getElementById('broche').addEventListener('click', () => {
            const panelIzquierdo = document.getElementById('panelIzquierdo');
            const panelDerecho = document.getElementById('panelDerecho');

            // Cuando termine la animación, borrarlos del DOM
            const removePanels = () => {
                panelIzquierdo.remove();
                panelDerecho.remove();
            }

            // Esperamos a que termine la transición y los quitamos
            panelDerecho.addEventListener('transitionend', removePanels, { once: true });
        });
    </script>




</body>

</html>
